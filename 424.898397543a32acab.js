"use strict";(self.webpackChunkpizza_dough=self.webpackChunkpizza_dough||[]).push([[424],{8424:(G,D,i)=>{i.r(D),i.d(D,{RecipeModule:()=>R});var r=i(6895),a=i(6802),F=i(4656),O=i(7579),L=i(3900),P=i(2722),B=i(262),x=i(457);class I{constructor(e){this.payload=e}}I.type="[Recipe] Set recipe id";var d,J=i(4838),t=i(8274),l=i(655),Q=i(8505),W=i(529);class h{constructor(e){this.httpClient=e}getRecipe(e){return this.httpClient.get(`./assets/data/recipes/${e}.json`)}}h.\u0275fac=function(e){return new(e||h)(t.LFG(W.eN))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});let u=((d=class{constructor(e){this.recipeService=e}static getSelectedRecipe(e){return e.selected}setRecipeIdAction(e,n){const s=n.payload.recipeId,p=e.getState().recipes.get(s);if(!p)return this.recipeService.getRecipe(s).pipe((0,Q.b)(v=>{const U=e.getState().recipes;v={...v,id:s},U.set(s,v),e.setState({selected:v,recipes:U})}));e.patchState({selected:p})}}).\u0275fac=function(e){return new(e||d)(t.LFG(h))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac}),d);(0,l.gn)([(0,a.aU)(I)],u.prototype,"setRecipeIdAction",null),(0,l.gn)([(0,a.Qf)()],u,"getSelectedRecipe",null),u=(0,l.gn)([(0,a.ZM)({name:"recipeInfo",defaults:{recipes:new Map,selected:null}})],u);var z=i(9300),j=i(4004);class g{get recipeDetails$(){return this.recipe$.pipe((0,z.h)(e=>!!e),(0,j.U)(e=>e?.recipe))}}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-instructions"]],decls:4,vars:3,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Recipe"),t.qZA(),t._UZ(2,"p",0),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("innerHTML",t.lcZ(3,1,n.recipeDetails$),t.oJD))},dependencies:[r.Ov]}),(0,l.gn)([(0,a.Ph)(u.getSelectedRecipe)],g.prototype,"recipe$",void 0);var M=i(4704),X=i(9841);class T{constructor(){this.emptyValue="-"}}T.\u0275fac=function(e){return new(e||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-row"]],inputs:{rowData:"rowData"},decls:8,vars:5,template:function(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&e){let s,p;t.xp6(2),t.Oqu(n.rowData.title),t.xp6(2),t.Oqu(null!==(s=t.lcZ(5,3,n.rowData.weight))&&void 0!==s?s:n.emptyValue),t.xp6(3),t.Oqu(null!==(p=n.rowData.recommended)&&void 0!==p?p:n.emptyValue)}},dependencies:[r.JJ],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600}"]});class C{}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-header"]],inputs:{unit:"unit"},decls:6,vars:1,template:function(e,n){1&e&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Recommended"),t.qZA()()),2&e&&(t.xp6(3),t.hij("Weight (",n.unit,")"))},styles:["[_nghost-%COMP%]{display:contents}"]});class S{}function Y(o,e){1&o&&t._UZ(0,"app-row",3),2&o&&t.Q6J("rowData",e.$implicit)}S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-total-weight-row"]],inputs:{totalWeight:"totalWeight"},decls:6,vars:3,template:function(e,n){1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._UZ(5,"td"),t.qZA()),2&e&&(t.xp6(3),t.hij("",t.lcZ(4,1,n.totalWeight)," (total weight)"))},dependencies:[r.JJ],styles:["[_nghost-%COMP%]{display:contents;font-weight:600}"]});class ${constructor(){this.unit=M.aB.unit}get totalWeight(){return this.data.map(e=>e.weight).filter(e=>!!e).reduce((e,n)=>e+n,0)??0}}$.\u0275fac=function(e){return new(e||$)},$.\u0275cmp=t.Xpm({type:$,selectors:[["app-table"]],inputs:{data:"data",unit:"unit"},decls:6,vars:3,consts:[[3,"unit"],[3,"rowData",4,"ngFor","ngForOf"],[3,"totalWeight"],[3,"rowData"]],template:function(e,n){1&e&&(t.TgZ(0,"table")(1,"thead"),t._UZ(2,"app-header",0),t.qZA(),t.TgZ(3,"tbody"),t.YNc(4,Y,1,1,"app-row",1),t._UZ(5,"app-total-weight-row",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("unit",n.unit),t.xp6(2),t.Q6J("ngForOf",n.data),t.xp6(1),t.Q6J("totalWeight",n.totalWeight))},dependencies:[r.sg,T,C,S],styles:[":host{width:100%;display:block}:host table{width:100%;border-collapse:collapse;text-align:left}:host table th{color:#757575;font-weight:500;width:30%}:host table th:last{width:40%}:host table th,:host table td{padding-inline:.75rem;padding-block:.5rem}:host table tr{background-color:inherit}:host table :where(app-row,app-total-weight-row):nth-child(odd){background-color:#f8f4ec}\n"],encapsulation:3});const H=function(){return[]};class c{constructor(){this.destroy$=new O.x,this.rowTitle=new Map([["flour","Flour"],["water","Water"],["yeast","Yeast or Starter"],["salt","Salt"],["oil","Oil/Lards/Shortening"],["sugar","Sugar"],["other","Other"]])}get tableData$(){return(0,X.a)([this.doughWeight$,this.doughCount$,this.selectedRecipe$]).pipe((0,z.h)(e=>e.every(n=>!!n)),(0,j.U)(e=>{const[n,s,p]=e,v=n*s,U=Object.values(p.ingredients).map(Z=>Z.bakers).reduce((Z,A)=>Number(Z)+Number(A),0);return Object.entries(p.ingredients).map(([Z,A])=>({title:this.rowTitle.get(Z)??Z,weight:A.bakers/U*v,recommended:A.recommended}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-ingredients"]],decls:4,vars:4,consts:[[3,"data"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h2"),t._uU(1,"Ingredients"),t.qZA(),t._UZ(2,"app-table",0),t.ALo(3,"async")),2&e){let s;t.xp6(2),t.Q6J("data",null!==(s=t.lcZ(3,1,n.tableData$))&&void 0!==s?s:t.DdM(3,H))}},dependencies:[$,r.Ov]}),(0,l.gn)([(0,a.Ph)(M.eZ.weightUnit$)],c.prototype,"weightUnit$",void 0),(0,l.gn)([(0,a.Ph)(M.eZ.doughWeight$)],c.prototype,"doughWeight$",void 0),(0,l.gn)([(0,a.Ph)(M.eZ.doughCount$)],c.prototype,"doughCount$",void 0),(0,l.gn)([(0,a.Ph)(u.getSelectedRecipe)],c.prototype,"selectedRecipe$",void 0);class b{constructor(e,n,s){this.store=e,this.route=n,this.router=s,this.destroy$=new O.x,this.subscribeToRoute()}subscribeToRoute(){this.route.params.pipe((0,L.w)(e=>this.store.dispatch(new I({recipeId:e.id}))),(0,P.R)(this.destroy$),(0,B.K)(()=>(0,x.D)(this.router.navigate(["recipe",J.t.selectedRecipe])))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}b.\u0275fac=function(e){return new(e||b)(t.Y36(a.yh),t.Y36(F.gz),t.Y36(F.F0))},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-recipe"]],decls:3,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-ingredients")(1,"hr")(2,"app-instructions")},dependencies:[g,c]});const V=[{path:":id",component:b},{path:"**",redirectTo:`${J.t.selectedRecipe}`}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[F.Bz.forChild(V),F.Bz]});class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[r.ez]});class y{}y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({imports:[r.ez]});class w{}w.\u0275fac=function(e){return new(e||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[r.ez,y]});class R{}R.\u0275fac=function(e){return new(e||R)},R.\u0275mod=t.oAB({type:R}),R.\u0275inj=t.cJS({imports:[r.ez,m,f,w,a.$l.forFeature([u]),W.JF]})}}]);