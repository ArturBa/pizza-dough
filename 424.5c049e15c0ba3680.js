"use strict";(self.webpackChunkpizza_dough=self.webpackChunkpizza_dough||[]).push([[424],{8424:(ee,j,a)=>{a.r(j),a.d(j,{RecipeModule:()=>w});var i=a(6895),r=a(4329),F=a(4656),D=a(7579),L=a(3900),z=a(2722),B=a(262),P=a(457);class O{constructor(t){this.payload=t}}O.type="[Recipe] Set recipe id";var l,H=a(4838),e=a(8274),p=a(655),Q=a(8505),J=a(529);class h{constructor(t){this.httpClient=t}getRecipe(t){return this.httpClient.get(`./assets/data/recipes/${t}.json`)}}h.\u0275fac=function(t){return new(t||h)(e.LFG(J.eN))},h.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});let d=((l=class{constructor(t){this.recipeService=t}static getSelectedRecipe(t){return t.selected}setRecipeIdAction(t,n){const s=n.payload.recipeId,A=t.getState().recipes.get(s);if(!A)return this.recipeService.getRecipe(s).pipe((0,Q.b)(b=>{const U=t.getState().recipes;b={...b,id:s},U.set(s,b),t.setState({selected:b,recipes:U})}));t.patchState({selected:A})}}).\u0275fac=function(t){return new(t||l)(e.LFG(h))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac}),l);(0,p.gn)([(0,r.aU)(O)],d.prototype,"setRecipeIdAction",null),(0,p.gn)([(0,r.Qf)()],d,"getSelectedRecipe",null),d=(0,p.gn)([(0,r.ZM)({name:"recipeInfo",defaults:{recipes:new Map,selected:null}})],d);var x=a(9300),W=a(4004);class u{get recipeDetails$(){return this.recipe$.pipe((0,x.h)(t=>!!t),(0,W.U)(t=>t?.recipe))}}u.\u0275fac=function(t){return new(t||u)},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-instructions"]],decls:4,vars:3,consts:[[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Recipe"),e.qZA(),e._UZ(2,"p",0),e.ALo(3,"async")),2&t&&(e.xp6(2),e.Q6J("innerHTML",e.lcZ(3,1,n.recipeDetails$),e.oJD))},dependencies:[i.Ov]}),(0,p.gn)([(0,r.Ph)(d.getSelectedRecipe)],u.prototype,"recipe$",void 0);var I=a(4704),Y=a(9841),X=a(4707);function N(o,t){if(1&o&&(e.TgZ(0,"th",2),e._uU(1),e.qZA()),2&o){const n=t.$implicit,s=e.oxw().ngIf;e.xp6(1),e.hij(" ",s.get(n)," ")}}function k(o,t){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,N,2,1,"th",1),e.qZA()),2&o){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.tableHeaderOrder)}}const M=new X.t;class v{constructor(){this._unit="",this.tableHeaderOrder=["title","bakers","weight","recommended"],this.tableHeaders$=M,M.subscribe(console.log)}set unit(t){this._unit=t,M.next((o=>new Map([["title",""],["bakers","Bakers' %"],["weight",`Weight (${o})`],["recommended","Recommended"]]))(t))}}v.\u0275fac=function(t){return new(t||v)},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-header"]],inputs:{unit:"unit"},decls:2,vars:3,consts:[[4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],["scope","col"]],template:function(t,n){1&t&&(e.YNc(0,k,2,1,"tr",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,n.tableHeaders$))},dependencies:[i.sg,i.O5,i.Ov],styles:["[_nghost-%COMP%]{display:contents}"]});class R{constructor(){this.emptyValue="-",this.tableHeaders$=M}}R.\u0275fac=function(t){return new(t||R)},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-row"]],inputs:{rowData:"rowData"},decls:20,vars:17,consts:[["scope","row"],[1,"data-title"]],template:function(t,n){if(1&t&&(e.TgZ(0,"tr")(1,"td",0),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",1),e._uU(5),e.ALo(6,"async"),e.qZA(),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"td")(10,"div",1),e._uU(11),e.ALo(12,"async"),e.qZA(),e._uU(13),e.ALo(14,"number"),e.qZA(),e.TgZ(15,"td")(16,"div",1),e._uU(17),e.ALo(18,"async"),e.qZA(),e._uU(19),e.qZA()()),2&t){let s;e.xp6(2),e.Oqu(n.rowData.title),e.xp6(3),e.hij(" ",e.lcZ(6,7,n.tableHeaders$).get("bakers")," "),e.xp6(2),e.hij(" ",e.lcZ(8,9,n.rowData.bakers),"% "),e.xp6(4),e.hij(" ",e.lcZ(12,11,n.tableHeaders$).get("weight")," "),e.xp6(2),e.hij(" ",e.lcZ(14,13,n.rowData.weight)," "),e.xp6(4),e.hij(" ",e.lcZ(18,15,n.tableHeaders$).get("recommended")," "),e.xp6(2),e.hij(" ",null!==(s=n.rowData.recommended)&&void 0!==s?s:n.emptyValue," ")}},dependencies:[i.Ov,i.JJ],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600}"]});class T{}function V(o,t){1&o&&e._UZ(0,"app-row",3),2&o&&e.Q6J("rowData",t.$implicit)}T.\u0275fac=function(t){return new(t||T)},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-total-weight-row"]],inputs:{totalWeight:"totalWeight"},decls:7,vars:3,template:function(t,n){1&t&&(e.TgZ(0,"tr"),e._UZ(1,"td")(2,"td"),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"number"),e.qZA(),e._UZ(6,"td"),e.qZA()),2&t&&(e.xp6(4),e.hij("",e.lcZ(5,1,n.totalWeight)," (total weight)"))},dependencies:[i.JJ],styles:["[_nghost-%COMP%]{display:contents;font-weight:600}"]});class C{constructor(){this.caption="Table caption",this.unit=I.aB.unit}get totalWeight(){return this.data.map(t=>t.weight).filter(t=>!!t).reduce((t,n)=>t+n,0)??0}}C.\u0275fac=function(t){return new(t||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-table"]],inputs:{data:"data",caption:"caption",unit:"unit"},decls:6,vars:4,consts:[[3,"unit"],[3,"rowData",4,"ngFor","ngForOf"],[3,"totalWeight"],[3,"rowData"]],template:function(t,n){1&t&&(e.TgZ(0,"table")(1,"thead"),e._UZ(2,"app-header",0),e.qZA(),e.TgZ(3,"tbody"),e.YNc(4,V,1,1,"app-row",1),e._UZ(5,"app-total-weight-row",2),e.qZA()()),2&t&&(e.uIk("aria-label",n.caption),e.xp6(2),e.Q6J("unit",n.unit),e.xp6(2),e.Q6J("ngForOf",n.data),e.xp6(1),e.Q6J("totalWeight",n.totalWeight))},dependencies:[i.sg,R,v,T],styles:[":host{width:100%;display:block}:host table{width:100%;border-collapse:collapse;text-align:left}:host table caption{visibility:collapse}:host table .data-title,:host table th{color:#757575;font-weight:500}:host table th,:host table td{padding-inline:.75rem;padding-block:.5rem}:host table tr{background-color:inherit}:host table thead{display:none}:host table td{display:flex;justify-content:space-between}:host table app-total-weight-row{display:none}@media only screen and (min-width: 600px) and (pointer: fine){:host table th,:host table td{display:table-cell}:host table .data-title{display:none}:host table thead{display:table-header-group}:host table app-total-weight-row{display:contents}:host table th{width:15%}:host table th:first{width:30%}:host table th:last{width:40%}}:host table :where(app-row,app-total-weight-row):nth-child(odd){background-color:#f8f4ec}\n"],encapsulation:3});const E=function(){return[]};class c{constructor(){this.destroy$=new D.x,this.rowTitle=new Map([["flour","Flour"],["water","Water"],["yeast","Yeast or Starter"],["salt","Salt"],["oil","Oil/Lards/Shortening"],["sugar","Sugar"],["other","Other"]])}get tableData$(){return(0,Y.a)([this.doughWeight$,this.doughCount$,this.selectedRecipe$]).pipe((0,x.h)(t=>t.every(n=>!!n)),(0,W.U)(t=>{const[n,s,A]=t,b=n*s,U=Object.values(A.ingredients).map(Z=>Z.bakers).reduce((Z,S)=>Number(Z)+Number(S),0);return Object.entries(A.ingredients).map(([Z,S])=>({title:this.rowTitle.get(Z)??Z,weight:S.bakers/U*b,bakers:S.bakers,recommended:S.recommended}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}c.\u0275fac=function(t){return new(t||c)},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-ingredients"]],decls:4,vars:4,consts:[["caption","Ingredients",3,"data"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h2"),e._uU(1,"Ingredients"),e.qZA(),e._UZ(2,"app-table",0),e.ALo(3,"async")),2&t){let s;e.xp6(2),e.Q6J("data",null!==(s=e.lcZ(3,1,n.tableData$))&&void 0!==s?s:e.DdM(3,E))}},dependencies:[C,i.Ov]}),(0,p.gn)([(0,r.Ph)(I.eZ.weightUnit$)],c.prototype,"weightUnit$",void 0),(0,p.gn)([(0,r.Ph)(I.eZ.doughWeight$)],c.prototype,"doughWeight$",void 0),(0,p.gn)([(0,r.Ph)(I.eZ.doughCount$)],c.prototype,"doughCount$",void 0),(0,p.gn)([(0,r.Ph)(d.getSelectedRecipe)],c.prototype,"selectedRecipe$",void 0);class ${constructor(t,n,s){this.store=t,this.route=n,this.router=s,this.destroy$=new D.x,this.subscribeToRoute()}subscribeToRoute(){this.route.params.pipe((0,L.w)(t=>this.store.dispatch(new O({recipeId:t.id}))),(0,z.R)(this.destroy$),(0,B.K)(()=>(0,P.D)(this.router.navigate(["recipe",H.t.selectedRecipe])))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}$.\u0275fac=function(t){return new(t||$)(e.Y36(r.yh),e.Y36(F.gz),e.Y36(F.F0))},$.\u0275cmp=e.Xpm({type:$,selectors:[["app-recipe"]],decls:3,vars:0,template:function(t,n){1&t&&e._UZ(0,"app-ingredients")(1,"hr")(2,"app-instructions")},dependencies:[u,c]});const _=[{path:":id",component:$},{path:"**",redirectTo:`${H.t.selectedRecipe}`}];class g{}g.\u0275fac=function(t){return new(t||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({imports:[F.Bz.forChild(_),F.Bz]});class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.oAB({type:m}),m.\u0275inj=e.cJS({imports:[i.ez]});class f{}f.\u0275fac=function(t){return new(t||f)},f.\u0275mod=e.oAB({type:f}),f.\u0275inj=e.cJS({imports:[i.ez]});class y{}y.\u0275fac=function(t){return new(t||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[i.ez,f]});class w{}w.\u0275fac=function(t){return new(t||w)},w.\u0275mod=e.oAB({type:w}),w.\u0275inj=e.cJS({imports:[i.ez,g,m,y,r.$l.forFeature([d]),J.JF]})}}]);