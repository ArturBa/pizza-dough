"use strict";(self.webpackChunkpizza_dough=self.webpackChunkpizza_dough||[]).push([[54],{2054:(N,O,i)=>{i.r(O),i.d(O,{RecipeModule:()=>R});var c=i(6895),a=i(6802),F=i(4656),D=i(7579),j=i(3900),L=i(2722);class I{constructor(e){this.payload=e}}I.type="[Recipe] Set recipe id";var d,t=i(8274),l=i(655),P=i(8505),J=i(529);class h{constructor(e){this.httpClient=e}getRecipe(e){return this.httpClient.get(`./assets/data/recipes/${e}.json`)}}h.\u0275fac=function(e){return new(e||h)(t.LFG(J.eN))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});let u=((d=class{constructor(e){this.recipeService=e}static getSelectedRecipe(e){return e.selected}setRecipeIdAction(e,n){const s=n.payload.recipeId,p=e.getState().recipes.get(s);if(!p)return this.recipeService.getRecipe(s).pipe((0,P.b)(Z=>{const U=e.getState().recipes;Z={...Z,id:s},U.set(s,Z),e.setState({selected:Z,recipes:U})}));e.patchState({selected:p})}}).\u0275fac=function(e){return new(e||d)(t.LFG(h))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac}),d);(0,l.gn)([(0,a.aU)(I)],u.prototype,"setRecipeIdAction",null),(0,l.gn)([(0,a.Qf)()],u,"getSelectedRecipe",null),u=(0,l.gn)([(0,a.ZM)({name:"recipeInfo",defaults:{recipes:new Map,selected:null}})],u);var W=i(9300),z=i(4004);class g{get recipeDetails$(){return this.recipe$.pipe((0,W.h)(e=>!!e),(0,z.U)(e=>e?.recipe))}}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-instructions"]],decls:4,vars:3,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Recipe"),t.qZA(),t._UZ(2,"p",0),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("innerHTML",t.lcZ(3,1,n.recipeDetails$),t.oJD))},dependencies:[c.Ov]}),(0,l.gn)([(0,a.Ph)(u.getSelectedRecipe)],g.prototype,"recipe$",void 0);var M=i(4704),B=i(9841);class T{constructor(){this.emptyValue="-"}}T.\u0275fac=function(e){return new(e||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-row"]],inputs:{rowData:"rowData"},decls:8,vars:5,template:function(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&e){let s,p;t.xp6(2),t.Oqu(n.rowData.title),t.xp6(2),t.Oqu(null!==(s=t.lcZ(5,3,n.rowData.weight))&&void 0!==s?s:n.emptyValue),t.xp6(3),t.Oqu(null!==(p=n.rowData.recommended)&&void 0!==p?p:n.emptyValue)}},dependencies:[c.JJ],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600}"]});class C{}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-header"]],inputs:{unit:"unit"},decls:6,vars:1,template:function(e,n){1&e&&(t.TgZ(0,"tr"),t._UZ(1,"th"),t.TgZ(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Recommended"),t.qZA()()),2&e&&(t.xp6(3),t.hij("Weight (",n.unit,")"))},styles:["[_nghost-%COMP%]{display:contents}"]});class b{}function x(o,e){1&o&&t._UZ(0,"app-row",3),2&o&&t.Q6J("rowData",e.$implicit)}b.\u0275fac=function(e){return new(e||b)},b.\u0275cmp=t.Xpm({type:b,selectors:[["app-total-weight-row"]],inputs:{totalWeight:"totalWeight"},decls:6,vars:3,template:function(e,n){1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td"),t.TgZ(2,"td"),t._uU(3),t.ALo(4,"number"),t.qZA(),t._UZ(5,"td"),t.qZA()),2&e&&(t.xp6(3),t.hij("",t.lcZ(4,1,n.totalWeight)," (total weight)"))},dependencies:[c.JJ],styles:["[_nghost-%COMP%]{display:contents;font-weight:600}"]});class S{constructor(){this.unit=M.aB.unit}get totalWeight(){return this.data.map(e=>e.weight).filter(e=>!!e).reduce((e,n)=>e+n,0)??0}}S.\u0275fac=function(e){return new(e||S)},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-table"]],inputs:{data:"data",unit:"unit"},decls:6,vars:3,consts:[[3,"unit"],[3,"rowData",4,"ngFor","ngForOf"],[3,"totalWeight"],[3,"rowData"]],template:function(e,n){1&e&&(t.TgZ(0,"table")(1,"thead"),t._UZ(2,"app-header",0),t.qZA(),t.TgZ(3,"tbody"),t.YNc(4,x,1,1,"app-row",1),t._UZ(5,"app-total-weight-row",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("unit",n.unit),t.xp6(2),t.Q6J("ngForOf",n.data),t.xp6(1),t.Q6J("totalWeight",n.totalWeight))},dependencies:[c.sg,T,C,b],styles:[":host{width:100%;display:block}:host table{width:100%;border-collapse:collapse;text-align:left}:host table th{color:#757575;font-weight:500;width:30%}:host table th:last{width:40%}:host table th,:host table td{padding-inline:.75rem;padding-block:.5rem}:host table tr{background-color:inherit}:host table :where(app-row,app-total-weight-row):nth-child(odd){background-color:#f8f4ec}\n"],encapsulation:3});const Q=function(){return[]};class r{constructor(){this.destroy$=new D.x,this.rowTitle=new Map([["flour","Flour"],["water","Water"],["yeast","Yeast or Starter"],["salt","Salt"],["oil","Oil/Lards/Shortening"],["sugar","Sugar"],["other","Other"]])}get tableData$(){return(0,B.a)([this.doughWeight$,this.doughCount$,this.selectedRecipe$]).pipe((0,W.h)(e=>e.every(n=>!!n)),(0,z.U)(e=>{const[n,s,p]=e,Z=n*s,U=Object.values(p.ingredients).map(v=>v.bakers).reduce((v,A)=>Number(v)+Number(A),0);return Object.entries(p.ingredients).map(([v,A])=>({title:this.rowTitle.get(v)??v,weight:A.bakers/U*Z,recommended:A.recommended}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-ingredients"]],decls:4,vars:4,consts:[[3,"data"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h2"),t._uU(1,"Ingredients"),t.qZA(),t._UZ(2,"app-table",0),t.ALo(3,"async")),2&e){let s;t.xp6(2),t.Q6J("data",null!==(s=t.lcZ(3,1,n.tableData$))&&void 0!==s?s:t.DdM(3,Q))}},dependencies:[S,c.Ov]}),(0,l.gn)([(0,a.Ph)(M.eZ.weightUnit$)],r.prototype,"weightUnit$",void 0),(0,l.gn)([(0,a.Ph)(M.eZ.doughWeight$)],r.prototype,"doughWeight$",void 0),(0,l.gn)([(0,a.Ph)(M.eZ.doughCount$)],r.prototype,"doughCount$",void 0),(0,l.gn)([(0,a.Ph)(u.getSelectedRecipe)],r.prototype,"selectedRecipe$",void 0);class ${constructor(e,n){this.store=e,this.route=n,this.destroy$=new D.x,this.subscribeToRoute()}subscribeToRoute(){this.route.params.pipe((0,j.w)(e=>this.store.dispatch(new I({recipeId:e.id}))),(0,L.R)(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}$.\u0275fac=function(e){return new(e||$)(t.Y36(a.yh),t.Y36(F.gz))},$.\u0275cmp=t.Xpm({type:$,selectors:[["app-recipe"]],decls:3,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-ingredients")(1,"hr")(2,"app-instructions")},dependencies:[g,r]});var X=i(4838);const H=[{path:":id",component:$},{path:"**",redirectTo:`${X.t.selectedRecipe}`}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[F.Bz.forChild(H),F.Bz]});class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[c.ez]});class y{}y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({imports:[c.ez]});class w{}w.\u0275fac=function(e){return new(e||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[c.ez,y]});class R{}R.\u0275fac=function(e){return new(e||R)},R.\u0275mod=t.oAB({type:R}),R.\u0275inj=t.cJS({imports:[c.ez,m,f,w,a.$l.forFeature([u]),J.JF]})}}]);