"use strict";(self.webpackChunkpizza_dough=self.webpackChunkpizza_dough||[]).push([[424],{8424:(nt,D,a)=>{a.r(D),a.d(D,{RecipeModule:()=>T});var s=a(6895),c=a(4329),M=a(4656),J=a(7579),L=a(3900),z=a(2722),B=a(262),P=a(457);class O{constructor(e){this.payload=e}}O.type="[Recipe] Set recipe id";var h,j=a(4838),t=a(8274),d=a(655),Q=a(8505),x=a(529);class g{constructor(e){this.httpClient=e}getRecipe(e){return this.httpClient.get(`./assets/data/recipes/${e}.json`)}}g.\u0275fac=function(e){return new(e||g)(t.LFG(x.eN))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});let u=((h=class{constructor(e){this.recipeService=e}static getSelectedRecipe(e){return e.selected}setRecipeIdAction(e,o){const i=o.payload.recipeId,l=e.getState().recipes.get(i);if(!l)return this.recipeService.getRecipe(i).pipe((0,Q.b)(r=>{const F=e.getState().recipes;r={...r,id:i},F.set(i,r),e.setState({selected:r,recipes:F})}));e.patchState({selected:l})}}).\u0275fac=function(e){return new(e||h)(t.LFG(g))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac}),h);(0,d.gn)([(0,c.aU)(O)],u.prototype,"setRecipeIdAction",null),(0,d.gn)([(0,c.Qf)()],u,"getSelectedRecipe",null),u=(0,d.gn)([(0,c.ZM)({name:"recipeInfo",defaults:{recipes:new Map,selected:null}})],u);var H=a(9300),W=a(4004);class m{get recipeDetails$(){return this.recipe$.pipe((0,H.h)(e=>!!e),(0,W.U)(e=>e?.recipe))}}m.\u0275fac=function(e){return new(e||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-instructions"]],decls:4,vars:3,consts:[[3,"innerHTML"]],template:function(e,o){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Recipe"),t.qZA(),t._UZ(2,"p",0),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("innerHTML",t.lcZ(3,1,o.recipeDetails$),t.oJD))},dependencies:[s.Ov]}),(0,d.gn)([(0,c.Ph)(u.getSelectedRecipe)],m.prototype,"recipe$",void 0);var v=a(4704),Y=a(9841),N=a(4707);function X(n,e){if(1&n&&(t.TgZ(0,"th",2),t._uU(1),t.qZA()),2&n){const o=e.$implicit,i=t.oxw().ngIf;t.xp6(1),t.hij(" ",i.get(o)," ")}}function k(n,e){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,X,2,1,"th",1),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.tableHeaderOrder)}}const U=new N.t;class R{constructor(){this._unit="",this.tableHeaderOrder=["title","bakers","weight","recommended"],this.tableHeaders$=U}set unit(e){this._unit=e,U.next((n=>new Map([["title",""],["bakers","Bakers' %"],["weight",`Weight (${n})`],["recommended","Recommended"]]))(e))}}R.\u0275fac=function(e){return new(e||R)},R.\u0275cmp=t.Xpm({type:R,selectors:[["app-header"]],inputs:{unit:"unit"},decls:2,vars:3,consts:[[4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],["scope","col"]],template:function(e,o){1&e&&(t.YNc(0,k,2,1,"tr",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.tableHeaders$))},dependencies:[s.sg,s.O5,s.Ov],styles:["[_nghost-%COMP%]{display:contents}"]});class C{constructor(){this.emptyValue="-",this.tableHeaders$=U}}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-row"]],inputs:{rowData:"rowData"},decls:20,vars:17,consts:[["scope","row"],[1,"data-title"]],template:function(e,o){if(1&e&&(t.TgZ(0,"tr")(1,"td",0),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",1),t._uU(5),t.ALo(6,"async"),t.qZA(),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td")(10,"div",1),t._uU(11),t.ALo(12,"async"),t.qZA(),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td")(16,"div",1),t._uU(17),t.ALo(18,"async"),t.qZA(),t._uU(19),t.qZA()()),2&e){let i;t.xp6(2),t.Oqu(o.rowData.title),t.xp6(3),t.hij(" ",t.lcZ(6,7,o.tableHeaders$).get("bakers")," "),t.xp6(2),t.hij(" ",t.lcZ(8,9,o.rowData.bakers),"% "),t.xp6(4),t.hij(" ",t.lcZ(12,11,o.tableHeaders$).get("weight")," "),t.xp6(2),t.hij(" ",t.lcZ(14,13,o.rowData.weight)," "),t.xp6(4),t.hij(" ",t.lcZ(18,15,o.tableHeaders$).get("recommended")," "),t.xp6(2),t.hij(" ",null!==(i=o.rowData.recommended)&&void 0!==i?i:o.emptyValue," ")}},dependencies:[s.Ov,s.JJ],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600}"]});class ${}function V(n,e){if(1&n&&(t.TgZ(0,"caption"),t.GkF(1,4),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",o.captionTemplate)}}function E(n,e){1&n&&t._UZ(0,"app-row",5),2&n&&t.Q6J("rowData",e.$implicit)}$.\u0275fac=function(e){return new(e||$)},$.\u0275cmp=t.Xpm({type:$,selectors:[["app-total-weight-row"]],inputs:{totalWeight:"totalWeight"},decls:7,vars:3,template:function(e,o){1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td")(2,"td"),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t._UZ(6,"td"),t.qZA()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,1,o.totalWeight)," (total weight)"))},dependencies:[s.JJ],styles:["[_nghost-%COMP%]{display:contents;font-weight:600}"]});class A{constructor(){this.unit=v.aB.unit}get totalWeight(){return this.data.map(e=>e.weight).filter(e=>!!e).reduce((e,o)=>e+o,0)??0}}function q(n,e){1&n&&(t.TgZ(0,"h2"),t._uU(1,"Ingredients"),t.qZA())}A.\u0275fac=function(e){return new(e||A)},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-table"]],inputs:{data:"data",caption:"caption",unit:"unit",captionTemplate:"captionTemplate"},decls:7,vars:5,consts:[[4,"ngIf"],[3,"unit"],[3,"rowData",4,"ngFor","ngForOf"],[3,"totalWeight"],[3,"ngTemplateOutlet"],[3,"rowData"]],template:function(e,o){1&e&&(t.TgZ(0,"table"),t.YNc(1,V,2,1,"caption",0),t.TgZ(2,"thead"),t._UZ(3,"app-header",1),t.qZA(),t.TgZ(4,"tbody"),t.YNc(5,E,1,1,"app-row",2),t._UZ(6,"app-total-weight-row",3),t.qZA()()),2&e&&(t.uIk("aria-label",o.caption),t.xp6(1),t.Q6J("ngIf",o.captionTemplate),t.xp6(2),t.Q6J("unit",o.unit),t.xp6(2),t.Q6J("ngForOf",o.data),t.xp6(1),t.Q6J("totalWeight",o.totalWeight))},dependencies:[s.sg,s.O5,s.tP,C,R,$],styles:[":host{width:100%;display:block}:host table{width:100%;border-collapse:collapse;text-align:left}:host table .data-title,:host table th{color:#757575;font-weight:500}:host table caption{text-align:left}:host table th,:host table td{padding-inline:.75rem;padding-block:.25rem}:host table tr{background-color:inherit;padding-block:.5rem;display:block}:host table thead{display:none}:host table td{display:flex;justify-content:space-between}:host table app-total-weight-row{display:none}@media only screen and (min-width: 600px) and (pointer: fine){:host table th,:host table td{display:table-cell;padding-block:.5rem}:host table .data-title{display:none}:host table thead{display:table-header-group}:host table app-total-weight-row{display:contents}:host table tr{display:table-row}:host table th{width:15%}:host table th:first{width:30%}:host table th:last{width:40%}}:host table :where(app-row,app-total-weight-row):nth-child(odd){background-color:#f8f4ec}\n"],encapsulation:3});const _=function(){return[]};class p{constructor(){this.destroy$=new J.x,this.rowTitle=new Map([["flour","Flour"],["water","Water"],["yeast","Yeast or Starter"],["salt","Salt"],["oil","Oil/Lards/Shortening"],["sugar","Sugar"],["other","Other"]]),this.DoughStateModelDefaults=v.aB}get tableData$(){return(0,Y.a)([this.doughWeight$,this.doughCount$,this.selectedRecipe$]).pipe((0,H.h)(e=>e.every(o=>!!o)),(0,W.U)(e=>{const[o,i,l]=e,r=o*i,F=Object.values(l.ingredients).map(Z=>Z.bakers).reduce((Z,I)=>Number(Z)+Number(I),0);return Object.entries(l.ingredients).map(([Z,I])=>({title:this.rowTitle.get(Z)??Z,weight:I.bakers/F*r,bakers:I.bakers,recommended:I.recommended}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}p.\u0275fac=function(e){return new(e||p)},p.\u0275cmp=t.Xpm({type:p,selectors:[["app-ingredients"]],decls:5,vars:8,consts:[["caption","Ingredients",3,"data","unit","captionTemplate"],["captionTemplate",""]],template:function(e,o){if(1&e&&(t._UZ(0,"app-table",0),t.ALo(1,"async"),t.ALo(2,"async"),t.YNc(3,q,2,0,"ng-template",null,1,t.W1O)),2&e){const i=t.MAs(4);let l,r;t.Q6J("data",null!==(l=t.lcZ(1,3,o.tableData$))&&void 0!==l?l:t.DdM(7,_))("unit",null!==(r=t.lcZ(2,5,o.weightUnit$))&&void 0!==r?r:o.DoughStateModelDefaults.unit)("captionTemplate",i)}},dependencies:[A,s.Ov]}),(0,d.gn)([(0,c.Ph)(v.eZ.weightUnit$)],p.prototype,"weightUnit$",void 0),(0,d.gn)([(0,c.Ph)(v.eZ.doughWeight$)],p.prototype,"doughWeight$",void 0),(0,d.gn)([(0,c.Ph)(v.eZ.doughCount$)],p.prototype,"doughCount$",void 0),(0,d.gn)([(0,c.Ph)(u.getSelectedRecipe)],p.prototype,"selectedRecipe$",void 0);class S{constructor(e,o,i){this.store=e,this.route=o,this.router=i,this.destroy$=new J.x,this.subscribeToRoute()}subscribeToRoute(){this.route.params.pipe((0,L.w)(e=>this.store.dispatch(new O({recipeId:e.id}))),(0,z.R)(this.destroy$),(0,B.K)(()=>(0,P.D)(this.router.navigate(["recipe",j.t.selectedRecipe])))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}S.\u0275fac=function(e){return new(e||S)(t.Y36(c.yh),t.Y36(M.gz),t.Y36(M.F0))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-recipe"]],decls:3,vars:0,template:function(e,o){1&e&&t._UZ(0,"app-ingredients")(1,"hr")(2,"app-instructions")},dependencies:[m,p]});const et=[{path:":id",component:S},{path:"**",redirectTo:`${j.t.selectedRecipe}`}];class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[M.Bz.forChild(et),M.Bz]});class y{}y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({imports:[s.ez]});class w{}w.\u0275fac=function(e){return new(e||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[s.ez]});class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({imports:[s.ez,w]});class T{}T.\u0275fac=function(e){return new(e||T)},T.\u0275mod=t.oAB({type:T}),T.\u0275inj=t.cJS({imports:[s.ez,f,y,b,c.$l.forFeature([u]),x.JF]})}}]);