"use strict";(self.webpackChunkpizza_dough=self.webpackChunkpizza_dough||[]).push([[424],{8424:(tt,O,a)=>{a.r(O),a.d(O,{RecipeModule:()=>b});var s=a(6895),r=a(4329),F=a(4656),j=a(7579),x=a(3900),z=a(2722),B=a(262),P=a(457);class I{constructor(e){this.payload=e}}I.type="[Recipe] Set recipe id";var d,H=a(4838),t=a(8274),l=a(655),Q=a(8505),J=a(529);class u{constructor(e){this.httpClient=e}getRecipe(e){return this.httpClient.get(`./assets/data/recipes/${e}.json`)}}u.\u0275fac=function(e){return new(e||u)(t.LFG(J.eN))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"});let h=((d=class{constructor(e){this.recipeService=e}static getSelectedRecipe(e){return e.selected}setRecipeIdAction(e,n){const i=n.payload.recipeId,p=e.getState().recipes.get(i);if(!p)return this.recipeService.getRecipe(i).pipe((0,Q.b)(Z=>{const U=e.getState().recipes;Z={...Z,id:i},U.set(i,Z),e.setState({selected:Z,recipes:U})}));e.patchState({selected:p})}}).\u0275fac=function(e){return new(e||d)(t.LFG(u))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac}),d);(0,l.gn)([(0,r.aU)(I)],h.prototype,"setRecipeIdAction",null),(0,l.gn)([(0,r.Qf)()],h,"getSelectedRecipe",null),h=(0,l.gn)([(0,r.ZM)({name:"recipeInfo",defaults:{recipes:new Map,selected:null}})],h);var L=a(9300),W=a(4004);class g{get recipeDetails$(){return this.recipe$.pipe((0,L.h)(e=>!!e),(0,W.U)(e=>e?.recipe))}}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-instructions"]],decls:4,vars:3,consts:[[3,"innerHTML"]],template:function(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Recipe"),t.qZA(),t._UZ(2,"p",0),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("innerHTML",t.lcZ(3,1,n.recipeDetails$),t.oJD))},dependencies:[s.Ov]}),(0,l.gn)([(0,r.Ph)(h.getSelectedRecipe)],g.prototype,"recipe$",void 0);var R=a(4704),Y=a(9841),X=a(4707);function N(o,e){if(1&o&&(t.TgZ(0,"th",2),t._uU(1),t.qZA()),2&o){const n=e.$implicit,i=t.oxw().ngIf;t.xp6(1),t.hij(" ",i.get(n)," ")}}function k(o,e){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,N,2,1,"th",1),t.qZA()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.tableHeaderOrder)}}const D=new X.t;class T{constructor(){this._unit="",this.tableHeaderOrder=["title","bakers","weight","recommended"],this.tableHeaders$=D}set unit(e){this._unit=e,D.next((o=>new Map([["title",""],["bakers","Bakers' %"],["weight",`Weight (${o})`],["recommended","Recommended"]]))(e))}}T.\u0275fac=function(e){return new(e||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-header"]],inputs:{unit:"unit"},decls:2,vars:3,consts:[[4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],["scope","col"]],template:function(e,n){1&e&&(t.YNc(0,k,2,1,"tr",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.tableHeaders$))},dependencies:[s.sg,s.O5,s.Ov],styles:["[_nghost-%COMP%]{display:contents}"]});class C{constructor(){this.emptyValue="-",this.tableHeaders$=D}}C.\u0275fac=function(e){return new(e||C)},C.\u0275cmp=t.Xpm({type:C,selectors:[["app-row"]],inputs:{rowData:"rowData"},decls:20,vars:17,consts:[["scope","row"],[1,"data-title"]],template:function(e,n){if(1&e&&(t.TgZ(0,"tr")(1,"th",0),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",1),t._uU(5),t.ALo(6,"async"),t.qZA(),t._uU(7),t.ALo(8,"number"),t.qZA(),t.TgZ(9,"td")(10,"div",1),t._uU(11),t.ALo(12,"async"),t.qZA(),t._uU(13),t.ALo(14,"number"),t.qZA(),t.TgZ(15,"td")(16,"div",1),t._uU(17),t.ALo(18,"async"),t.qZA(),t._uU(19),t.qZA()()),2&e){let i;t.xp6(2),t.Oqu(n.rowData.title),t.xp6(3),t.hij(" ",t.lcZ(6,7,n.tableHeaders$).get("bakers")," "),t.xp6(2),t.hij(" ",t.lcZ(8,9,n.rowData.bakers),"% "),t.xp6(4),t.hij(" ",t.lcZ(12,11,n.tableHeaders$).get("weight")," "),t.xp6(2),t.hij(" ",t.lcZ(14,13,n.rowData.weight)," "),t.xp6(4),t.hij(" ",t.lcZ(18,15,n.tableHeaders$).get("recommended")," "),t.xp6(2),t.hij(" ",null!==(i=n.rowData.recommended)&&void 0!==i?i:n.emptyValue," ")}},dependencies:[s.Ov,s.JJ],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600}"]});class ${}function V(o,e){1&o&&t._UZ(0,"app-row",3),2&o&&t.Q6J("rowData",e.$implicit)}$.\u0275fac=function(e){return new(e||$)},$.\u0275cmp=t.Xpm({type:$,selectors:[["app-total-weight-row"]],inputs:{totalWeight:"totalWeight"},decls:7,vars:3,template:function(e,n){1&e&&(t.TgZ(0,"tr"),t._UZ(1,"td")(2,"td"),t.TgZ(3,"td"),t._uU(4),t.ALo(5,"number"),t.qZA(),t._UZ(6,"td"),t.qZA()),2&e&&(t.xp6(4),t.hij("",t.lcZ(5,1,n.totalWeight)," (total weight)"))},dependencies:[s.JJ],styles:["[_nghost-%COMP%]{display:contents;font-weight:600}"]});class A{constructor(){this.caption="Table caption",this.unit=R.aB.unit}get totalWeight(){return this.data.map(e=>e.weight).filter(e=>!!e).reduce((e,n)=>e+n,0)??0}}A.\u0275fac=function(e){return new(e||A)},A.\u0275cmp=t.Xpm({type:A,selectors:[["app-table"]],inputs:{data:"data",caption:"caption",unit:"unit"},decls:6,vars:4,consts:[[3,"unit"],[3,"rowData",4,"ngFor","ngForOf"],[3,"totalWeight"],[3,"rowData"]],template:function(e,n){1&e&&(t.TgZ(0,"table")(1,"thead"),t._UZ(2,"app-header",0),t.qZA(),t.TgZ(3,"tbody"),t.YNc(4,V,1,1,"app-row",1),t._UZ(5,"app-total-weight-row",2),t.qZA()()),2&e&&(t.uIk("aria-label",n.caption),t.xp6(2),t.Q6J("unit",n.unit),t.xp6(2),t.Q6J("ngForOf",n.data),t.xp6(1),t.Q6J("totalWeight",n.totalWeight))},dependencies:[s.sg,C,T,$],styles:[":host{width:100%;display:block}:host table{width:100%;border-collapse:collapse;text-align:left}:host table .data-title,:host table thead th{color:#757575;font-weight:500}:host table caption{text-align:left}:host table th,:host table td{padding-inline:.75rem;padding-block:.25rem}:host table tr{background-color:inherit;padding-block:.5rem;display:block}:host table thead{display:none}:host table td{display:flex;justify-content:space-between}:host table app-total-weight-row{display:none}@media only screen and (min-width: 600px) and (pointer: fine){:host table th,:host table td{display:table-cell;padding-block:.5rem}:host table .data-title{display:none}:host table thead{display:table-header-group}:host table app-total-weight-row{display:contents}:host table tr{display:table-row}:host table th{width:15%}:host table th:first{width:30%}:host table th:last{width:40%}}:host table :where(app-row,app-total-weight-row):nth-child(odd){background-color:#f8f4ec}\n"],encapsulation:3});const E=function(){return[]};class c{constructor(){this.destroy$=new j.x,this.rowTitle=new Map([["flour","Flour"],["water","Water"],["yeast","Yeast or Starter"],["salt","Salt"],["oil","Oil/Lards/Shortening"],["sugar","Sugar"],["other","Other"]]),this.DoughStateModelDefaults=R.aB}get tableData$(){return(0,Y.a)([this.doughWeight$,this.doughCount$,this.selectedRecipe$]).pipe((0,L.h)(e=>e.every(n=>!!n)),(0,W.U)(e=>{const[n,i,p]=e,Z=n*i,U=Object.values(p.ingredients).map(v=>v.bakers).reduce((v,M)=>Number(v)+Number(M),0);return Object.entries(p.ingredients).map(([v,M])=>({title:this.rowTitle.get(v)??v,weight:M.bakers/U*Z,bakers:M.bakers,recommended:M.recommended}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}c.\u0275fac=function(e){return new(e||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-ingredients"]],decls:5,vars:7,consts:[["caption","Ingredients",3,"data","unit"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h2"),t._uU(1,"Ingredients"),t.qZA(),t._UZ(2,"app-table",0),t.ALo(3,"async"),t.ALo(4,"async")),2&e){let i,p;t.xp6(2),t.Q6J("data",null!==(i=t.lcZ(3,2,n.tableData$))&&void 0!==i?i:t.DdM(6,E))("unit",null!==(p=t.lcZ(4,4,n.weightUnit$))&&void 0!==p?p:n.DoughStateModelDefaults.unit)}},dependencies:[A,s.Ov]}),(0,l.gn)([(0,r.Ph)(R.eZ.weightUnit$)],c.prototype,"weightUnit$",void 0),(0,l.gn)([(0,r.Ph)(R.eZ.doughWeight$)],c.prototype,"doughWeight$",void 0),(0,l.gn)([(0,r.Ph)(R.eZ.doughCount$)],c.prototype,"doughCount$",void 0),(0,l.gn)([(0,r.Ph)(h.getSelectedRecipe)],c.prototype,"selectedRecipe$",void 0);class S{constructor(e,n,i){this.store=e,this.route=n,this.router=i,this.destroy$=new j.x,this.subscribeToRoute()}subscribeToRoute(){this.route.params.pipe((0,x.w)(e=>this.store.dispatch(new I({recipeId:e.id}))),(0,z.R)(this.destroy$),(0,B.K)(()=>(0,P.D)(this.router.navigate(["recipe",H.t.selectedRecipe])))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}S.\u0275fac=function(e){return new(e||S)(t.Y36(r.yh),t.Y36(F.gz),t.Y36(F.F0))},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-recipe"]],decls:3,vars:0,template:function(e,n){1&e&&t._UZ(0,"app-ingredients")(1,"hr")(2,"app-instructions")},dependencies:[g,c]});const _=[{path:":id",component:S},{path:"**",redirectTo:`${H.t.selectedRecipe}`}];class m{}m.\u0275fac=function(e){return new(e||m)},m.\u0275mod=t.oAB({type:m}),m.\u0275inj=t.cJS({imports:[F.Bz.forChild(_),F.Bz]});class f{}f.\u0275fac=function(e){return new(e||f)},f.\u0275mod=t.oAB({type:f}),f.\u0275inj=t.cJS({imports:[s.ez]});class y{}y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=t.oAB({type:y}),y.\u0275inj=t.cJS({imports:[s.ez]});class w{}w.\u0275fac=function(e){return new(e||w)},w.\u0275mod=t.oAB({type:w}),w.\u0275inj=t.cJS({imports:[s.ez,y]});class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({imports:[s.ez,m,f,w,r.$l.forFeature([h]),J.JF]})}}]);