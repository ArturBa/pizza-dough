import{$ as Ct,Aa as jt,Ba as Ft,C as vt,F as r,Fa as Tt,H as ct,Ha as Q,L as wt,M as g,N as o,O as n,P as p,X as c,Y,Z as q,a as ft,aa as M,b as ut,ba as v,c as B,d,g as L,ga as Dt,h as ht,ia as G,j as V,ja as K,ka as w,l as gt,m as yt,n as Mt,oa as St,q as U,r as f,ra as mt,t as z,u as a,ua as bt,v as u,va as It,wa as xt,xa as Rt,ya as D,za as $t}from"./chunk-NDS55DNV.js";var dt=class{constructor(e){this.payload=e}},F=dt;(()=>{dt.type="[Recipe] Set recipe id"})();var S=class{constructor(e){this.httpClient=e}getRecipe(e){return this.httpClient.get(`./assets/data/recipes/${e}.json`)}},X=S;(()=>{S.\u0275fac=function(t){return new(t||S)(z(jt))}})(),(()=>{S.\u0275prov=U({token:S,factory:S.\u0275fac,providedIn:"root"})})();var y,h=(y=class{constructor(e){this.recipeService=e}static getSelectedRecipe(e){return e.selected}setRecipeIdAction(e,t){let i=t.payload.recipeId,s=e.getState().recipes.get(i);if(s){e.patchState({selected:s});return}return this.recipeService.getRecipe(i).pipe(Mt(l=>{let H=e.getState().recipes;l=ut(ft({},l),{id:i}),H.set(i,l),e.setState({selected:l,recipes:H})}))}},(()=>{y.\u0275fac=function(t){return new(t||y)(z(X))}})(),(()=>{y.\u0275prov=U({token:y,factory:y.\u0275fac})})(),y);d([xt(F)],h.prototype,"setRecipeIdAction",null);d([$t()],h,"getSelectedRecipe",null);h=d([Rt({name:"recipeInfo",defaults:{recipes:new Map,selected:null}})],h);var T=class{get recipeDetails$(){return this.recipe$.pipe(V(e=>!!e),L(e=>e?.recipe))}},P=T;(()=>{T.\u0275fac=function(t){return new(t||T)}})(),(()=>{T.\u0275cmp=a({type:T,selectors:[["app-instructions"]],decls:4,vars:3,consts:[[3,"innerHTML"]],template:function(t,i){t&1&&(o(0,"h2"),c(1,"Recipe"),n(),p(2,"p",0),M(3,"async")),t&2&&(r(2),g("innerHTML",v(3,1,i.recipeDetails$),vt))},dependencies:[G]})})();d([D(h.getSelectedRecipe)],P.prototype,"recipe$",void 0);var N=class{constructor(){this.emptyValue="-"}},_=N;(()=>{N.\u0275fac=function(t){return new(t||N)}})(),(()=>{N.\u0275cmp=a({type:N,selectors:[["app-row"]],inputs:{rowData:"rowData"},decls:8,vars:5,template:function(t,i){if(t&1&&(o(0,"tr")(1,"td"),c(2),n(),o(3,"td"),c(4),M(5,"number"),n(),o(6,"td"),c(7),n()()),t&2){let s,l;r(2),Y(i.rowData.title),r(2),Y((s=v(5,3,i.rowData.weight))!==null&&s!==void 0?s:i.emptyValue),r(3),Y((l=i.rowData.recommended)!==null&&l!==void 0?l:i.emptyValue)}},dependencies:[K],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]   td[_ngcontent-%COMP%]:first-child{font-weight:600}"]})})();var W=class{},tt=W;(()=>{W.\u0275fac=function(t){return new(t||W)}})(),(()=>{W.\u0275cmp=a({type:W,selectors:[["app-header"]],inputs:{unit:"unit"},decls:6,vars:1,template:function(t,i){t&1&&(o(0,"tr"),p(1,"th"),o(2,"th"),c(3),n(),o(4,"th"),c(5,"Recommended"),n()()),t&2&&(r(3),q("Weight (",i.unit,")"))},styles:["[_nghost-%COMP%]{display:contents}"]})})();var O=class{},et=O;(()=>{O.\u0275fac=function(t){return new(t||O)}})(),(()=>{O.\u0275cmp=a({type:O,selectors:[["app-total-weight-row"]],inputs:{totalWeight:"totalWeight"},decls:6,vars:3,template:function(t,i){t&1&&(o(0,"tr"),p(1,"td"),o(2,"td"),c(3),M(4,"number"),n(),p(5,"td"),n()),t&2&&(r(3),q("",v(4,1,i.totalWeight)," (total weight)"))},dependencies:[K],styles:["[_nghost-%COMP%]{display:contents;font-weight:600}"]})})();function Pt(lt,e){if(lt&1&&p(0,"app-row",3),lt&2){let t=e.$implicit;g("rowData",t)}}var E=class{constructor(){this.unit=Tt.unit}get totalWeight(){return this.data.map(e=>e.weight).filter(e=>!!e).reduce((e,t)=>e+t,0)??0}},it=E;(()=>{E.\u0275fac=function(t){return new(t||E)}})(),(()=>{E.\u0275cmp=a({type:E,selectors:[["app-table"]],inputs:{data:"data",unit:"unit"},decls:6,vars:3,consts:[[3,"unit"],[3,"rowData",4,"ngFor","ngForOf"],[3,"totalWeight"],[3,"rowData"]],template:function(t,i){t&1&&(o(0,"table")(1,"thead"),p(2,"app-header",0),n(),o(3,"tbody"),wt(4,Pt,1,1,"app-row",1),p(5,"app-total-weight-row",2),n()()),t&2&&(r(2),g("unit",i.unit),r(2),g("ngForOf",i.data),r(1),g("totalWeight",i.totalWeight))},dependencies:[Dt,_,tt,et],styles:[`:host{width:100%;display:block}:host table{width:100%;border-collapse:collapse;text-align:left}:host table th{color:#757575;font-weight:500;width:30%}:host table th:last{width:40%}:host table th,:host table td{padding-inline:.75rem;padding-block:.5rem}:host table tr{background-color:inherit}:host table :where(app-row,app-total-weight-row):nth-child(odd){background-color:#f8f4ec}
`],encapsulation:3})})();var At=function(){return[]},J=class{constructor(){this.destroy$=new B,this.rowTitle=new Map([["flour","Flour"],["water","Water"],["yeast","Yeast or Starter"],["salt","Salt"],["oil","Oil/Lards/Shortening"],["sugar","Sugar"],["other","Other"]])}get tableData$(){return ht([this.doughWeight$,this.doughCount$,this.selectedRecipe$]).pipe(V(e=>e.every(t=>!!t)),L(e=>{let[t,i,s]=e,l=t*i,H=Object.values(s.ingredients).map(j=>j.bakers).reduce((j,A)=>Number(j)+Number(A),0);return Object.entries(s.ingredients).map(([j,A])=>({title:this.rowTitle.get(j)??j,weight:A.bakers/H*l,recommended:A.recommended}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}},C=J;(()=>{J.\u0275fac=function(t){return new(t||J)}})(),(()=>{J.\u0275cmp=a({type:J,selectors:[["app-ingredients"]],decls:4,vars:4,consts:[[3,"data"]],template:function(t,i){if(t&1&&(o(0,"h2"),c(1,"Ingredients"),n(),p(2,"app-table",0),M(3,"async")),t&2){let s;r(2),g("data",(s=v(3,1,i.tableData$))!==null&&s!==void 0?s:Ct(3,At))}},dependencies:[it,G]})})();d([D(Q.weightUnit$)],C.prototype,"weightUnit$",void 0);d([D(Q.doughWeight$)],C.prototype,"doughWeight$",void 0);d([D(Q.doughCount$)],C.prototype,"doughCount$",void 0);d([D(h.getSelectedRecipe)],C.prototype,"selectedRecipe$",void 0);var k=class{constructor(e,t){this.store=e,this.route=t,this.destroy$=new B,this.subscribeToRoute()}subscribeToRoute(){this.route.params.pipe(gt(e=>this.store.dispatch(new F({recipeId:e.id}))),yt(this.destroy$)).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}},ot=k;(()=>{k.\u0275fac=function(t){return new(t||k)(ct(bt),ct(St))}})(),(()=>{k.\u0275cmp=a({type:k,selectors:[["app-recipe"]],decls:3,vars:0,template:function(t,i){t&1&&p(0,"app-ingredients")(1,"hr")(2,"app-instructions")},dependencies:[P,C]})})();var Vt=18,Ut=[{path:":id",component:ot},{path:"**",redirectTo:`${Vt}`}],b=class{},nt=b;(()=>{b.\u0275fac=function(t){return new(t||b)}})(),(()=>{b.\u0275mod=u({type:b})})(),(()=>{b.\u0275inj=f({imports:[mt.forChild(Ut),mt]})})();var I=class{},pt=I;(()=>{I.\u0275fac=function(t){return new(t||I)}})(),(()=>{I.\u0275mod=u({type:I})})(),(()=>{I.\u0275inj=f({imports:[w]})})();var x=class{},at=x;(()=>{x.\u0275fac=function(t){return new(t||x)}})(),(()=>{x.\u0275mod=u({type:x})})(),(()=>{x.\u0275inj=f({imports:[w]})})();var R=class{},st=R;(()=>{R.\u0275fac=function(t){return new(t||R)}})(),(()=>{R.\u0275mod=u({type:R})})(),(()=>{R.\u0275inj=f({imports:[w,at]})})();var $=class{},Nt=$;(()=>{$.\u0275fac=function(t){return new(t||$)}})(),(()=>{$.\u0275mod=u({type:$})})(),(()=>{$.\u0275inj=f({imports:[w,nt,pt,st,It.forFeature([h]),Ft]})})();export{Nt as RecipeModule};
